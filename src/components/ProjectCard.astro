---
import { Image } from 'astro:assets';
const { href, title, subtitle, image, tags = [], loading = "lazy" } = Astro.props;
---

<div class="project-card">
  <div class="image-container">
    <Image src={image} alt={title} loading={loading} />
  </div>
  <div class="content">
    <div class="header">
      <h3 class="title">
        <a href={href} class="stretched-link">{title}</a>
      </h3>
      <span class="subtitle">{subtitle}</span>
    </div>
    
    <div class="body">
      <slot />
    </div>

    {tags.length > 0 && (
      <div class="tags">
        {tags.map(tag => (
          <span class="tag">{tag}</span>
        ))}
      </div>
    )}
  </div>
</div>

<style>
  .project-card {
    display: block;
    border: 1px solid var(--color-border);
    border-radius: 8px;
    overflow: hidden;
    text-decoration: none;
    color: inherit;
    transition: transform 0.2s, box-shadow 0.2s, border-color 0.2s;
    background: #fff;
    height: 100%; /* For grid layouts */
    display: flex;
    flex-direction: column;
    position: relative; /* Added for stretched link */
  }

  .project-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    border-color: var(--color-accent);
  }

  .stretched-link::after {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: 1;
    content: "";
  }

  .title a {
    color: inherit;
    text-decoration: none;
    border-bottom: none;
  }

  .title a:hover {
    color: inherit;
    border-bottom: none;
  }

  .project-card:focus-within {
    border-color: var(--color-accent);
    box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.2);
    outline: none;
  }

  .title a:focus {
    outline: none;
  }

  .image-container {
    width: 100%;
    aspect-ratio: 16 / 9;
    background-color: var(--color-bg-subtle);
    overflow: hidden;
    border-bottom: 1px solid var(--color-border);
  }

  .image-container img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 0; /* Reset global img radius */
    transition: transform 0.5s ease;
  }

  .project-card:hover .image-container img {
    transform: scale(1.03);
  }

  .content {
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    flex-grow: 1;
  }

  .header {
    margin-bottom: 1rem;
  }

  .title {
    margin: 0;
    font-size: 1.25rem;
    font-weight: 600;
  }

  .subtitle {
    display: block;
    margin-top: 0.25rem;
    font-size: 0.9rem;
    color: var(--color-text-light);
    font-weight: 500;
  }

  .body {
    font-size: 0.95rem;
    color: var(--color-text);
    margin-bottom: 1.5rem;
    flex-grow: 1;
  }
  
  /* Resetting potential markdown margins inside the slot */
  .body :global(p:last-child) {
    margin-bottom: 0;
  }

  .tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-top: auto;
  }

  .tag {
    font-size: 0.75rem;
    background-color: var(--color-bg-subtle);
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    color: var(--color-text-light);
    border: 1px solid var(--color-border);
  }
</style>